<!DOCTYPE html><html><head><meta charset="utf-8"><title>Debug Redirect</title></head>
<body>
  <h2>認証結果デバッグ</h2>
  <pre id="dbg" style="white-space:pre-wrap"></pre>
<script>
  const hash   = location.hash;
  const search = location.search;
  const hp = new URLSearchParams(hash.replace(/^#/,''));
  const qp = new URLSearchParams(search);
  const token = hp.get('access_token');
  const code  = qp.get('code');

  document.getElementById('dbg').textContent =
    'href:   ' + location.href + '\n' +
    'hash:   ' + hash + '\n' +
    'search: ' + search + '\n' +
    'access_token: ' + (token ? '(取得OK)' : 'なし') + '\n' +
    'code:        ' + (code  || 'なし');

  // ここでは自動遷移はしない（状況確認優先）
</script>
</body></html>
